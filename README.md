# teenfit #teenfitschool
학교생활을 fit하게 건강관리
1. 수면: 취침/ 기상 시간 기록과 수면시간 규칙성 점수화: 취침 시간 알람 설정 알람이 울리면 알람을 끈 시간을 저장, 기상 알림 설정후 기상 알림 끈 시간 저장하기, 수면시간 저장하고 수면시간이 부족하거나, 과하면 안내 메시지 들려주기 "30분전만 전에 자면 수면질이 달라져요","핸드폰을 ~~~"
2. 학생 체질(알레르기, 질병)에 따른 오늘이 급식 메뉴 관리: 가상데이터는 chat에게 500건, 급식은 api로 실시간 가져오기, csv 파일로 업로드 
3. 운동 미션: 건강관리를 위한 운동_올레길(만보기 기능), 교내에서 사제동행 걷기 포인트 적립하기. 적립금에 해당하는 필기구, 상품권 지급
   - 점심식사후 급식 칼로리에 비례하여 권장 걸음수 제공
   - 5일, 15일, 30일 단위로 자신이 짠 운동 계획을 학생이 입력하고 계획을 달성하면 달성률에 따라 포인트 적립
   - 적립된 포인트는 매달 관리자는 합산결과를 시각화하여 표시한다. 포인트 지급방식은 학교재량에 맡긴다.
   
## kiro 프롬프트
1. 리액트, 자바스크립트로 중고등학생이 교내에서 학생 개별 건강관리를 해주는 앱 만들어줘
2. 인트로화면 상단에는 **TeenFit** 원형 로고를 그라데이션으로 만들어 상단에 배치 해줘
3. 인트로화면에 로그인 탭은 원형 로고 아래에  학생탭, 교사탭, 관리자탭 로그인 페이지를 탭 컴포넌트로 작성해줘
4. 교사는 green색상,학생은 orange 색상, 관리자는 blue 색상 으로 앱 컴포넌트의 모든 UI 색상을 통일해줘.
5. 학생 테스트 데이터는 500건으로 하고 학년,반,번호,이름,이메일,폰번호는 개인정보 데이터
6. 학생 테스트 데이터로 BMI 지수를 항목으로 하는 bmi.csv 파일을 만들어줘
7. bmi.csv 파일에 항목으로 알러지, 질병, 기타 항목에는 학생이 먹지 않는 메뉴로 구성하여 전체 500명중에 50건 추가하고 fit.csv 파일로 총 500건 생성하여 다운로드 받을 수 있게 만들어줘
8. 교사 테스트 데이터 항목으로 폰번호, 이름, 담임유무는 O, X로 선택할수 있고, 비교과 교사 항목에는 보건, 사서, 상담, 영양사로 구성하여 50건의 teachers.csv 파일로 다운로드 받을 수 있도록 작성해줘
9. 관리자 teenfit 앱 전체 데이터를 관리하고 비밀번호 분실시 비번 재설정, csv 파일 관리 등 권한을 가짐.

## 플로우 (급식, 체중관리)
1. 보건실 체육샘, 담임에 나이스에 건강기록부에 키,몸무게 재면 비만지수
- (체질량지수: Body Mass Index ..) 정상:18.5 ~22.9, 과체중(비만전단계), 비만1단계, 비만2단계, 비만 3단계(고도비만)_35.0이상,경도비만, 고도비만 결과로  고도비만 관리 , 식단관리 교육, 예산이 나오면 줄넘기 사주고, 건강강좌
4. 식단관리에서 알레르기는 초기에 **건강상태조사서**를 연초에 보건교사가 한다. 데이터 정리해서 알레르기, 질병 정리
5. 알레르기는 영양사에게 넘기면 영양사가 관리한다.
6. 예) 복숭아 알레르기가 있다면 학생 개인에게 통보는 안된다.
7. 식단이 공개 되므로  알림을 학생에게 해주면 좋다.
8. 오늘 메뉴에 복숭아 있으니, 복숭아는 먹지 말라
9. 식단은 일주일치 나오므로 2틀전에 알려주면 좋다
10. 학생이 갖고있는 질병은 3월에 건강상태조사서 정리해서 담임 넘기면 **체육대회,수련회, 수학여행** 시 데이터를 참고 자료로 넘겨준다.
11. 학생에게 체육대회나 수련회시 격한 운동을 하지않도록 알림을 알린다.
12. 고도비만 학생은 경상북도에서 관리하는 **아이날씬 홈페이지**에서 정보를 봐라할 수 있다
13. 식단메뉴에 대해 영양 정보는 유튜브로 정보을 확인한다.
14. 일주일치 식단이 나오니 고도비만 학생에게 칼로리 높은 메뉴는 양을 줄여라고 해줄 수 있다.
15. 학생 개인이 1주일 마다 미성년이니까 **학부모**한테 같이 알려 주면 좋겠따
16. 사제동행 걷기 프로그램을 했다. 비만관리 건강증진, 체중감량 도전, 미션에 성공하면 3달간에 감량하면 상품권을 줬다.
17. 우리학교 식단에 칼로리를 알려주는 것도 좋다.
18. teenfit.kr 

## flow (수면)
1. 수면(취침/기상) 기능 요구사항 정리
A. 목표

학생이 취침/기상 시간을 기록하고

**수면시간과 규칙성(일관성)**을 점수화해

부족/과다 수면 시 **가이드 메시지(음성/텍스트)**로 건강 습관을 돕는다.

B. 핵심 기능 목록
1) 취침 알람(수면 시작 알림)

사용자는 취침 알람 시간을 설정한다.

알람이 울리면 사용자는 **알람 끄기(또는 미루기)**를 누른다.

앱은 **알람을 끈 실제 시간(타임스탬프)**을 저장한다.

저장 항목(예):

bed_alarm_time (설정 시간)

bed_dismissed_time (끄기 시간, 실제 취침 시작 추정)

2) 기상 알람(수면 종료 알림)

사용자는 기상 알람 시간을 설정한다.

알람이 울리면 사용자는 **알람 끄기(또는 미루기)**를 누른다.

앱은 **알람을 끈 실제 시간(타임스탬프)**을 저장한다.

저장 항목(예):

wake_alarm_time

wake_dismissed_time (실제 기상 시간 추정)

3) 수면 기록 생성(자동)

같은 날짜/연속 구간에서

bed_dismissed_time → wake_dismissed_time을 하나의 수면 세션으로 묶는다.

계산:

sleep_duration_minutes = wake - bed

예외 처리:

취침이 자정 전/후로 넘어가는 경우(23:30~07:00) 자동 처리

알람 끄기 기록이 한쪽만 있는 경우 “미완료 기록”으로 저장

4) 부족/과다 수면 안내(피드백)

수면시간이 기준 범위보다 부족/과다하면 안내 메시지를 보여주고(옵션: 음성)

메시지 예시(기본 제공):

“30분만 더 일찍 자도 수면의 질이 달라져요”

“자기 30분 전엔 휴대폰 화면을 줄여보세요”

“일정한 기상 시간이 집중력에 도움돼요”

트리거 예:

sleep_duration < 최소 기준 → 부족 메시지

sleep_duration > 최대 기준 → 과다 메시지

취침/기상 시간이 들쑥날쑥 → 규칙성 개선 메시지

5) 규칙성 점수화(수면 리듬 점수)

점수는 0~100 같은 형태로 제공

평가 요소(최소 2개):

취침 시간 일관성 (최근 7일 취침 시간 편차)

기상 시간 일관성 (최근 7일 기상 시간 편차)

결과 출력:

오늘 점수 + 지난 7일 평균

“개선 팁” 1개 자동 추천

C. 화면/UX 요구사항(최소)

수면 홈

오늘 취침/기상 설정 상태

어젯밤 수면시간(분/시간)

규칙성 점수

알람 설정 화면

취침 알람 시간 설정

기상 알람 시간 설정

요일 반복(평일/주말) 옵션

수면 기록 화면

날짜별 수면시간 리스트

부족/적정/과다 라벨

D. 데이터 요구사항(저장해야 할 값)
수면 세션 테이블(예시)

user_id

date (기상 기준 날짜 권장)

bed_alarm_time (설정)

bed_dismissed_time (실제)

wake_alarm_time (설정)

wake_dismissed_time (실제)

sleep_duration_minutes (계산)

regularity_score (계산/저장 또는 실시간 계산)

feedback_message_id (어떤 메시지 노출했는지 로그)

E. 알림/메시지 정책(옵션 포함)

메시지 노출 방식 선택:

(기본) 텍스트 토스트/카드

(옵션) TTS 음성 안내

과도한 알림 방지:

같은 유형 메시지는 하루 1회만

사용자가 “오늘은 그만 보기” 가능

F. 예외/엣지 케이스(꼭)

알람을 안 끄고 자동 종료된 경우 기록 방법

취침만 있고 기상이 없는 경우(세션 미완성)

사용자가 수동으로 “어제는 ○시에 잤어요” 수정 가능 여부

기상 시간이 오후로 찍히는 등 비정상 값 방지

원하면 다음 단계로 바로 이어서 만들어줄게:

✅ 규칙성 점수 계산식(편차 → 0~100 변환)

✅ 수면 부족/과다 기준(학생 연령대별 추천 범위)

✅ DB 스키마(Supabase) + API 엔드포인트 설계
